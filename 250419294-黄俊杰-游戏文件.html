<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>连连看记忆卡片游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            padding: 20px;
        }
        
        .game-container {
            max-width: 1200px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            padding: 25px;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .game-header h1 {
            color: #2c3e50;
            font-size: 2.8rem;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .game-header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .info-box {
            text-align: center;
            flex: 1;
            padding: 10px;
        }
        
        .info-box h3 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .info-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #3498db;
        }
        
        #score {
            color: #2ecc71;
        }
        
        #timer {
            color: #e74c3c;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        #restart-btn {
            background: linear-gradient(to right, #3498db, #2ecc71);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }
        
        #restart-btn:active {
            transform: translateY(1px);
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 0 auto;
            max-width: 900px;
        }
        
        @media (min-width: 768px) {
            .game-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .game-grid {
                grid-template-columns: repeat(8, 1fr);
            }
        }
        
        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card.matched .card-inner {
            transform: rotateY(180deg);
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.8);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
        }
        
        .card-front {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            transform: rotateY(180deg);
        }
        
        .card-back {
            background: linear-gradient(135deg, #3498db, #2ecc71);
            color: white;
        }
        
        .card-back i {
            font-size: 2.5rem;
        }
        
        .game-status {
            text-align: center;
            margin-top: 25px;
            padding: 15px;
            border-radius: 15px;
            background-color: #f8f9fa;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .win-message {
            color: #2ecc71;
            font-size: 1.8rem;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        .match-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            color: #2ecc71;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            animation: matchEffect 0.8s ease-out;
        }
        
        @keyframes matchEffect {
            0% { 
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% { 
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% { 
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5);
            }
        }
        
        .level-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .level-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ddd;
            transition: background-color 0.3s;
        }
        
        .level-dot.active {
            background-color: #3498db;
        }
        
        .instructions {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .instructions ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .instructions li {
            padding: 8px 0;
            color: #555;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions i {
            color: #3498db;
        }
        
        .footer {
            text-align: center;
            margin-top: 25px;
            color: #7f8c8d;
            font-size: 0.9rem;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1><i class="fas fa-gamepad"></i> 连连看记忆卡片</h1>
            <p>翻牌匹配相同卡片，挑战你的记忆力！</p>
        </div>
        
        <div class="game-info">
            <div class="info-box">
                <h3>分数</h3>
                <div id="score" class="info-value">0</div>
            </div>
            
            <div class="info-box">
                <h3>时间</h3>
                <div id="timer" class="info-value">00:00</div>
            </div>
            
            <div class="info-box">
                <h3>剩余卡片</h3>
                <div id="remaining" class="info-value">16</div>
            </div>
        </div>
        
        <div class="controls">
            <button id="restart-btn">
                <i class="fas fa-redo-alt"></i> 重新开始游戏
            </button>
        </div>
        
        <div class="level-indicator">
            <div class="level-dot active"></div>
            <div class="level-dot"></div>
            <div class="level-dot"></div>
        </div>
        
        <div class="game-grid" id="game-grid">
            <!-- 卡片将通过JavaScript动态生成 -->
        </div>
        
        <div class="game-status" id="game-status">
            游戏已准备就绪！点击任意卡片开始游戏
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> 游戏规则</h3>
            <ul>
                <li><i class="fas fa-mouse-pointer"></i> 点击卡片将其翻开</li>
                <li><i class="fas fa-check-circle"></i> 连续翻开两张相同的卡片即可得分</li>
                <li><i class="fas fa-clock"></i> 在最短时间内匹配所有卡片</li>
                <li><i class="fas fa-redo-alt"></i> 点击"重新开始游戏"按钮重置游戏</li>
            </ul>
        </div>
        
        <div class="footer">
            <p>连连看记忆卡片游戏 &copy; 2023 | 使用HTML、CSS和JavaScript构建</p>
        </div>
    </div>

    <script>
        // 游戏配置
        const gameConfig = {
            easy: { pairs: 8, gridColumns: 4 },   // 8对卡片，4x4网格
            medium: { pairs: 12, gridColumns: 6 }, // 12对卡片，6x4网格
            hard: { pairs: 16, gridColumns: 8 }    // 16对卡片，8x4网格
        };
        
        // 游戏状态变量
        let gameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            score: 0,
            time: 0,
            timer: null,
            isPlaying: false,
            canFlip: true,
            level: 'easy'
        };
        
        // 卡片图标集合
        const cardIcons = [
            'fas fa-star', 'fas fa-heart', 'fas fa-moon', 'fas fa-sun',
            'fas fa-cloud', 'fas fa-bolt', 'fas fa-tree', 'fas fa-flag',
            'fas fa-gem', 'fas fa-key', 'fas fa-bell', 'fas fa-crown',
            'fas fa-rocket', 'fas fa-ghost', 'fas fa-dragon', 'fas fa-ice-cream',
            'fas fa-cat', 'fas fa-dog', 'fas fa-fish', 'fas fa-hippo'
        ];
        
        // DOM元素
        const gameGrid = document.getElementById('game-grid');
        const scoreElement = document.getElementById('score');
        const timerElement = document.getElementById('timer');
        const remainingElement = document.getElementById('remaining');
        const restartButton = document.getElementById('restart-btn');
        const gameStatus = document.getElementById('game-status');
        const levelDots = document.querySelectorAll('.level-dot');
        
        // 初始化游戏
        function initGame(level = 'easy') {
            // 重置游戏状态
            clearInterval(gameState.timer);
            gameState = {
                cards: [],
                flippedCards: [],
                matchedPairs: 0,
                score: 0,
                time: 0,
                timer: null,
                isPlaying: false,
                canFlip: true,
                level: level
            };
            
            // 更新UI
            scoreElement.textContent = '0';
            timerElement.textContent = '00:00';
            gameStatus.textContent = '游戏已准备就绪！点击任意卡片开始游戏';
            gameStatus.classList.remove('win-message');
            
            // 设置网格列数
            const config = gameConfig[level];
            gameGrid.style.gridTemplateColumns = `repeat(${config.gridColumns}, 1fr)`;
            
            // 更新等级指示器
            levelDots.forEach((dot, index) => {
                const levels = ['easy', 'medium', 'hard'];
                dot.classList.toggle('active', levels[index] === level);
            });
            
            // 生成卡片
            generateCards(config.pairs);
            
            // 更新剩余卡片数
            updateRemainingCards();
        }
        
        // 生成卡片
        function generateCards(pairsCount) {
            // 清空游戏网格
            gameGrid.innerHTML = '';
            
            // 选择指定数量的图标
            const selectedIcons = cardIcons.slice(0, pairsCount);
            
            // 创建卡片数组（每对图标出现两次）
            const cardsArray = [...selectedIcons, ...selectedIcons];
            
            // 随机打乱卡片顺序
            shuffleArray(cardsArray);
            
            // 创建卡片元素
            cardsArray.forEach((icon, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.dataset.icon = icon;
                
                const cardInner = document.createElement('div');
                cardInner.className = 'card-inner';
                
                const cardFront = document.createElement('div');
                cardFront.className = 'card-front';
                const iconElement = document.createElement('i');
                iconElement.className = icon;
                cardFront.appendChild(iconElement);
                
                const cardBack = document.createElement('div');
                cardBack.className = 'card-back';
                const questionMark = document.createElement('i');
                questionMark.className = 'fas fa-question';
                cardBack.appendChild(questionMark);
                
                cardInner.appendChild(cardFront);
                cardInner.appendChild(cardBack);
                card.appendChild(cardInner);
                
                // 添加点击事件
                card.addEventListener('click', () => flipCard(card));
                
                gameGrid.appendChild(card);
                gameState.cards.push(card);
            });
        }
        
        // 随机打乱数组（Fisher-Yates洗牌算法）
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // 翻牌
        function flipCard(card) {
            // 如果卡片已经匹配或已经翻开，或者不能翻牌，则返回
            if (card.classList.contains('matched') || 
                card.classList.contains('flipped') || 
                !gameState.canFlip ||
                gameState.flippedCards.length >= 2) {
                return;
            }
            
            // 开始游戏计时
            if (!gameState.isPlaying) {
                startTimer();
                gameState.isPlaying = true;
                gameStatus.textContent = '游戏进行中...';
            }
            
            // 翻开卡片
            card.classList.add('flipped');
            gameState.flippedCards.push(card);
            
            // 检查是否翻开了两张卡片
            if (gameState.flippedCards.length === 2) {
                gameState.canFlip = false;
                setTimeout(checkMatch, 800);
            }
        }
        
        // 检查是否匹配
        function checkMatch() {
            const [card1, card2] = gameState.flippedCards;
            const isMatch = card1.dataset.icon === card2.dataset.icon;
            
            if (isMatch) {
                // 匹配成功
                card1.classList.add('matched');
                card2.classList.add('matched');
                
                // 增加分数和匹配对数
                gameState.score += 100;
                gameState.matchedPairs++;
                
                // 更新分数显示
                scoreElement.textContent = gameState.score;
                
                // 显示匹配成功动画
                showMatchAnimation();
                
                // 检查游戏是否结束
                if (gameState.matchedPairs === gameConfig[gameState.level].pairs) {
                    endGame();
                }
            } else {
                // 匹配失败，翻回卡片
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                
                // 减少分数（可选）
                if (gameState.score > 0) {
                    gameState.score -= 10;
                    scoreElement.textContent = gameState.score;
                }
            }
            
            // 清空已翻开的卡片数组，允许继续翻牌
            gameState.flippedCards = [];
            gameState.canFlip = true;
            
            // 更新剩余卡片数
            updateRemainingCards();
        }
        
        // 显示匹配成功动画
        function showMatchAnimation() {
            const matchAnimation = document.createElement('div');
            matchAnimation.className = 'match-animation';
            matchAnimation.innerHTML = '<i class="fas fa-check-circle"></i>';
            document.body.appendChild(matchAnimation);
            
            // 动画结束后移除元素
            setTimeout(() => {
                matchAnimation.remove();
            }, 800);
        }
        
        // 开始计时
        function startTimer() {
            gameState.timer = setInterval(() => {
                gameState.time++;
                updateTimerDisplay();
            }, 1000);
        }
        
        // 更新计时器显示
        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.time / 60).toString().padStart(2, '0');
            const seconds = (gameState.time % 60).toString().padStart(2, '0');
            timerElement.textContent = `${minutes}:${seconds}`;
        }
        
        // 更新剩余卡片数
        function updateRemainingCards() {
            const totalPairs = gameConfig[gameState.level].pairs;
            const remaining = totalPairs - gameState.matchedPairs;
            remainingElement.textContent = remaining * 2;
        }
        
        // 结束游戏
        function endGame() {
            clearInterval(gameState.timer);
            gameState.isPlaying = false;
            
            // 计算最终分数（时间越短，分数越高）
            const timeBonus = Math.max(0, 1000 - gameState.time * 5);
            gameState.score += timeBonus;
            scoreElement.textContent = gameState.score;
            
            // 显示胜利消息
            gameStatus.textContent = `恭喜！你赢了！最终得分：${gameState.score}，用时：${formatTime(gameState.time)}`;
            gameStatus.classList.add('win-message');
        }
        
        // 格式化时间显示
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // 重新开始游戏
        restartButton.addEventListener('click', () => {
            initGame(gameState.level);
        });
        
        // 等级选择
        levelDots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                const levels = ['easy', 'medium', 'hard'];
                initGame(levels[index]);
            });
        });
        
        // 页面加载时初始化游戏
        document.addEventListener('DOMContentLoaded', () => {
            initGame('easy');
        });
    </script>
</body>
</html>